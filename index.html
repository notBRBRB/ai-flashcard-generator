<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Flashcard Generator</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <header>
        <div class="header-inner">
            <div class="header-left"></div>
            <h1 id="pageTitle">Dashboard</h1>
            <div class="theme-toggle">
                <input id="themeSwitch" type="checkbox" class="hidden-input" />
                <label class="toggle-switch" for="themeSwitch">
                    <span class="switch-ball"></span>
                </label>
            </div>
        </div>
    </header>

    <div id="toastContainer" class="toast-container"></div>

    <main id="appContent">
        <!-- Dashboard Page -->
        <section id="dashboardPage" class="page active">
            <div class="stats-overview">
                <div class="stat-main">
                    <div class="stat-label">üî• Streak</div>
                    <div id="statStreak" class="stat-value">0</div>
                </div>
                <div class="progress-box">
                    <div class="progress-label">Daily Goal (<span id="progressCount">0</span>/5)</div>
                    <div class="progress-track">
                        <div id="progressBar" class="progress-fill" style="width:0%"></div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="stat-card due" onclick="navigateTo('study')">
                    <div id="statDue" class="stat-value">0</div>
                    <div class="stat-label">Due Today</div>
                </div>
                <div class="stat-card overdue" onclick="navigateTo('study')">
                    <div id="statOverdue" class="stat-value">0</div>
                    <div class="stat-label">Overdue</div>
                </div>
                <div class="stat-card total" onclick="navigateTo('library')">
                    <div id="statTotal" class="stat-value">0</div>
                    <div class="stat-label">Total Cards</div>
                </div>
                <div class="stat-card new">
                    <div id="statNew" class="stat-value">0</div>
                    <div class="stat-label">New Cards</div>
                </div>
            </div>

            <div class="quick-actions">
                <button id="startStudyBtn" class="btn-primary large" onclick="navigateTo('study')">Start
                    Studying</button>
            </div>

            <div class="detailed-stats">
                <h3>Insights</h3>
                <div class="stats-row">
                    <span>Avg Ease: <strong id="statAvgEase">0</strong></span>
                    <span>Avg Interval: <strong id="statAvgInterval">0</strong>d</span>
                    <span>Next Due: <strong id="statNextDue">‚Äî</strong></span>
                </div>
                <div class="dist">
                    <div class="dist-label">Due Distribution</div>
                    <div class="dist-bars">
                        <div class="dist-bar overdue" id="distOverdue" style="width:0%"></div>
                        <div class="dist-bar today" id="distToday" style="width:0%"></div>
                        <div class="dist-bar week" id="distWeek" style="width:0%"></div>
                        <div class="dist-bar later" id="distLater" style="width:0%"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Library Page -->
        <section id="libraryPage" class="page hidden">
            <div class="page-header-actions">
                <div class="category-manager">
                    <select id="categorySelect"></select>
                    <div class="cat-btns">
                        <button id="addCategoryBtn" class="btn-icon" title="Add Category">+</button>
                        <button id="renameCategoryBtn" class="btn-icon" title="Rename Category">‚úé</button>
                        <button id="deleteCategoryBtn" class="btn-icon btn-danger" title="Delete Category">üóë</button>
                    </div>
                </div>
                <input id="searchInput" class="search-input" placeholder="Search cards..." />
            </div>

            <div id="deckInfo" class="deck-info">0 cards</div>
            <div id="flashcardContainer"></div>

            <div class="library-actions">
                <button id="shuffleDeckBtn" class="btn-secondary">Shuffle</button>
                <button id="clearDeckBtn" class="btn-danger">Clear Deck</button>
            </div>
        </section>

        <!-- Create Page -->
        <section id="createPage" class="page hidden">
            <div class="create-container">
                <div class="create-card ai-gen">
                    <div class="card-badge">AI Powered</div>
                    <h2>Smart Generation</h2>
                    <p class="subtitle">Paste your notes, articles, or text. Our AI will extract concepts for you.</p>
                    <textarea id="notesInput" placeholder="Paste your notes here..."></textarea>
                    <div class="create-options">
                        <label class="toggle-label mini" for="forceAI">
                            <input id="forceAI" type="checkbox" />
                            <span class="toggle-ui" aria-hidden="true"></span>
                            <span class="toggle-text">Force AI Summarization</span>
                        </label>
                    </div>
                    <div class="create-btns">
                        <button id="generateBtn" class="btn-primary">Generate Flashcards</button>
                        <span id="genSpinner" class="spinner hidden" aria-live="polite"></span>
                    </div>
                    <div id="aiMissingWarning" class="warning-text hidden">
                        ‚ö†Ô∏è OpenAI API Key missing! Set it in <strong>Settings</strong>.
                    </div>
                </div>

                <div class="create-divider">
                    <span>OR</span>
                </div>

                <div class="create-card manual">
                    <h2>Manual Entry</h2>
                    <p class="subtitle">Add cards one by one to your deck.</p>
                    <button id="manualAddBtn" class="btn-secondary large-btn" onclick="quickAddCard()">
                        + Add Single Card
                    </button>
                </div>
            </div>
        </section>

        <!-- Study Page -->
        <section id="studyPage" class="page hidden">
            <div class="study-progress-container">
                <div class="study-progress-track">
                    <div id="studyProgressBar" class="study-progress-fill" style="width:0%"></div>
                </div>
                <div id="studyProgressText" class="study-progress-text">0/0</div>
            </div>
            <div id="studySection">
                <div class="study-card-container">
                    <div id="studyCard"></div>
                </div>
                <div class="study-controls">
                    <div class="rating-buttons">
                        <button class="diff-btn easy" data-diff="easy">Easy</button>
                        <button class="diff-btn medium" data-diff="medium">Medium</button>
                        <button class="diff-btn hard" data-diff="hard">Hard</button>
                    </div>
                    <div class="study-extras">
                        <button id="speakBtn" class="btn-icon-large">üîä</button>
                        <label class="toggle-label mini" for="ttsAutoPlay">
                            <input id="ttsAutoPlay" type="checkbox" />
                            <span class="toggle-ui" aria-hidden="true"></span>
                            <span class="toggle-text">Auto-Play TTS</span>
                        </label>
                    </div>
                </div>
            </div>
        </section>

        <!-- Settings Page -->
        <section id="settingsPage" class="page hidden">
            <div class="settings-group">
                <h3>AI Configuration</h3>
                <div class="settings-grid">
                    <div class="input-group">
                        <label for="aiProviderSelect">Preferred AI Model</label>
                        <select id="aiProviderSelect" class="text-input">
                            <option value="gemini">Google Gemini (Free Tier)</option>
                            <option value="openai">OpenAI (GPT-4o-mini)</option>
                        </select>
                    </div>
                    <div class="input-group" id="openaiKeyGroup">
                        <label for="apiKeyInput">OpenAI API Key</label>
                        <div class="api-key-wrapper">
                            <input type="password" id="apiKeyInput" placeholder="sk-..." class="text-input" />
                            <button id="saveKeyBtn" class="btn-icon">üíæ</button>
                        </div>
                    </div>
                    <div class="input-group" id="geminiKeyGroup">
                        <label for="geminiKeyInput">Gemini API Key</label>
                        <div class="api-key-wrapper">
                            <input type="password" id="geminiKeyInput" placeholder="Enter Gemini Key..."
                                class="text-input" />
                            <button id="saveGeminiKeyBtn" class="btn-icon">üíæ</button>
                        </div>
                    </div>
                    <p class="input-hint">Keys are stored locally in your browser. <a
                            href="https://aistudio.google.com/app/apikey" target="_blank"
                            style="color:var(--accent)">Get Gemini Key here (Free)</a></p>
                </div>
            </div>
            <div class="settings-group">
                <h3>Data Management</h3>
                <div class="settings-grid">
                    <button id="saveDeckBtn" class="btn-secondary">Save to Local</button>
                    <button id="loadDeckBtn" class="btn-secondary">Load from Local</button>
                    <button id="exportDeckBtn" class="btn-secondary">Export JSON</button>
                    <div class="import-container">
                        <label for="importJSON" class="btn-secondary import-label">Import JSON</label>
                        <input type="file" id="importJSON" accept="application/json" class="hidden" />
                    </div>
                </div>
            </div>
            <div class="settings-group">
                <h3>App Info</h3>
                <p>AI Flashcard Generator v2.0</p>
                <p>A simpler, cleaner way to study.</p>
            </div>
        </section>
    </main>

    <nav class="bottom-nav">
        <button class="nav-item active" onclick="navigateTo('dashboard')">
            <span class="nav-icon">üè†</span>
            <span class="nav-label">Home</span>
        </button>
        <button class="nav-item" onclick="navigateTo('library')">
            <span class="nav-icon">üìö</span>
            <span class="nav-label">Library</span>
        </button>
        <button class="nav-item plus" onclick="navigateTo('create')">
            <span class="nav-icon">+</span>
        </button>
        <button class="nav-item" onclick="navigateTo('study')">
            <span class="nav-icon">üß†</span>
            <span class="nav-label">Study</span>
        </button>
        <button class="nav-item" onclick="navigateTo('settings')">
            <span class="nav-icon">‚öôÔ∏è</span>
            <span class="nav-label">Settings</span>
        </button>
    </nav>

    <!-- Modals -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal">
            <h3 id="modalTitle">Modal Title</h3>
            <div id="modalBody" class="modal-body"></div>
            <div class="modal-footer">
                <button id="modalCancelBtn" class="btn-secondary">Cancel</button>
                <button id="modalConfirmBtn" class="btn-primary">Confirm</button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>